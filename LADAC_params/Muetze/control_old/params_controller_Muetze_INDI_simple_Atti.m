% ** Parameters of the LQR controller for the quadcopter Muetze **

% Disclaimer:
%   SPDX-License-Identifier: GPL-3.0-only
% 
%   Copyright (C) 2020-2022 Yannic Beyer
%   Copyright (C) 2022 TU Braunschweig, Institute of Flight Guidance
% *************************************************************************

% load reference model parameters
params_controller_refMod_Muetze_INDI;

% load control allocation parameters
params_controller_ca_Muetze_INDI;
cntrl.ca.W_v = cntrl.ca.W_v(1:end-1,1:end-1);
cntrl.ca.gamma = 1;

% controller sample time 
cntrl.sample_time = 0.0025;

% control effectiveness matrix
cntrl.ny_du_red = pinv( [ ...
    0.0041    0.0050   -0.0003; ...
   -0.0041    0.0050    0.0005; ...
   -0.0041   -0.0050   -0.0005; ...
    0.0041   -0.0050    0.0003 ...
    ] );

cntrl.ny_du_dt = [ ...
   -0.0166    0.0166   -0.0166    0.0166; ...
    0.0258   -0.0258    0.0258   -0.0258; ...
   -1.5623    1.5623   -1.5623    1.5623 ...
     ];

% controller gains
cntrl.K = single( [ ...
   80.0000         0         0   16.2377         0         0    0.6229         0         0; ...
         0   80.0000    0.0000         0   16.2377    0.0000         0    0.6229    0.0000; ...
         0    0.0000   15.0000         0    0.0000    6.3850         0    0.0000    0.2839 ...
    ] );